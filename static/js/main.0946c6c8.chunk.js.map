{"version":3,"sources":["reducer/name-space.js","reducer/data/selectors.js","reducer/data/actions.js","utils.js","reducer/data/data.js","components/App/App.jsx","reducer/reducer.js","index.js"],"names":["NameSpace","DATA","NAME_SPACE","getCode","state","code","ActionType","ActionCreator","type","payload","extend","a","b","Object","assign","initialState","Operation","dispatch","getState","myHeaders","Headers","append","urlencoded","URLSearchParams","fetch","method","headers","body","redirect","then","response","text","result","access_token","JSON","parse","console","log","catch","error","connect","setCode","DataOperation","useEffect","window","location","search","has","get","onClick","open","url","combineReducers","action","store","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","withExtraArgument","ReactDOM","render","document","getElementById"],"mappings":"iLAIeA,EAJG,CAChBC,KAAK,QCCDC,EAAaF,EAAUC,KAEvBE,EAAU,SAACC,GACf,OAAOA,EAAMF,GAAYG,MCLrBC,EACC,OAGDC,EACK,SAACF,GAAD,MAAW,CAClBG,KAAMF,EACNG,QAASJ,ICPPK,EAAS,SAACC,EAAGC,GACjB,OAAOC,OAAOC,OAAO,GAAIH,EAAGC,ICKxBG,EAAe,CACnBV,KAAM,MAYFW,EACK,SAACX,GAAD,OAAU,SAACY,EAAUC,GAC1BD,EAASV,EAAsBF,IAE/B,IAAIc,EAAY,IAAIC,QACpBD,EAAUE,OAAO,eAAgB,qCACjCF,EAAUE,OAAO,SAAU,uDAE3B,IAAIC,EAAa,IAAIC,gBACrBD,EAAWD,OAAO,YAAa,oBAC/BC,EAAWD,OAAO,gBAAiB,oCACnCC,EAAWD,OAAO,aAAc,sBAChCC,EAAWD,OAAO,eAAgB,mCAClCC,EAAWD,OAAO,OAAQhB,GAS1BmB,MAAM,+CAPe,CACjBC,OAAQ,OACRC,QAASP,EACTQ,KAAML,EACNM,SAAU,WAITC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GAAW,IACNC,EAAgBC,KAAKC,MAAMH,GAA3BC,aAEPT,MAAM,iJAAD,OAAkJS,IAClJJ,MAAK,SAACC,GA2CHM,QAAQC,IAAIP,SAGvBQ,OAAM,SAAAC,GAAK,OAAIH,QAAQC,IAAI,QAASE,QCpDhCC,eAXS,SAACpC,GAAD,MAAY,CAChCC,KAAMF,EAAQC,OAGS,SAACa,GAAD,MAAe,CACtCwB,QADsC,SAC9BpC,GACJY,EAASyB,EAAsBrC,QAKxBmC,EApCH,SAAC,GAAqB,IAApBC,EAAmB,EAAnBA,QAAmB,EAAVpC,KAkBnB,OAPAsC,qBAAU,WAEF,IAAIpB,gBAAgBqB,OAAOC,SAASC,QAAQC,IAA5C,SACGN,EAAQ,IAAIlB,gBAAgBqB,OAAOC,SAASC,QAAQE,IAA5C,WAEhB,IAEI,oCACL,4BAAQC,QAAS,WAjBfzB,MAAM,sKACDK,MAAK,SAACC,GACHc,OAAOM,KAAKpB,EAASqB,QAExBb,OAAM,SAACC,GACJ,MAAMA,MAcb/B,KAAM,UAFT,4H,8BCpBS4C,4BAAgB,eAC5BpD,EAAUC,MFKG,WAAmC,IAAlCG,EAAiC,uDAAzBW,EAAcsC,EAAW,uCAChD,OAAQA,EAAO7C,MACb,KAAKF,EACH,OAAOI,EAAON,EAAO,CAACC,KAAMgD,EAAO5C,UAGvC,OAAOL,M,gBGPHkD,EAAQC,sBACVC,EACAC,8BACIC,0BAAgBC,IAAMC,uBAI9BC,IAASC,OACP,kBAAC,IAAD,CAAUR,MAAOA,GACf,kBAAC,EAAD,OAEFS,SAASC,eAAe,W","file":"static/js/main.0946c6c8.chunk.js","sourcesContent":["const NameSpace = {\n  DATA: `DATA`,\n};\n\nexport default NameSpace;\n","import NameSpace from '../name-space';\n\nconst NAME_SPACE = NameSpace.DATA;\n\nconst getCode = (state) => {\n  return state[NAME_SPACE].code;\n};\n\nexport {getCode};\n","const ActionType = {\n  CODE: `CODE`,\n};\n\nconst ActionCreator = {\n  setCode: (code) => ({\n    type: ActionType.CODE,\n    payload: code,\n  }),\n};\n\nexport {ActionType, ActionCreator};\n","const extend = (a, b) => {\n  return Object.assign({}, a, b);\n};\n\nexport {extend};\n","import {ActionType, ActionCreator} from './actions';\nimport NameSpace from '../name-space';\nimport {extend} from '../../utils';\n\nconst NAME_SPACE = NameSpace.DATA;\n\nconst initialState = {\n  code: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ActionType.CODE:\n      return extend(state, {code: action.payload});\n  }\n\n  return state;\n};\n\nconst Operation = {\n  setCode: (code) => (dispatch, getState) => {\n      dispatch(ActionCreator.setCode(code));\n\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n      myHeaders.append(\"Cookie\", \"csrftoken=Bf4BIN3poundd3ew4hHsCAyTbCGP89ef; rur=FTW\");\n\n      var urlencoded = new URLSearchParams();\n      urlencoded.append(\"client_id\", \"1576420319199590\");\n      urlencoded.append(\"client_secret\", \"f1633dbb351aac66a73d763e06497079\");\n      urlencoded.append(\"grant_type\", \"authorization_code\");\n      urlencoded.append(\"redirect_uri\", \"https://volokhovoleg.github.io/\");\n      urlencoded.append(\"code\", code);\n\n      var requestOptions = {\n          method: 'POST',\n          headers: myHeaders,\n          body: urlencoded,\n          redirect: 'follow'\n      };\n      // Получаем токен\n      fetch(\"https://api.instagram.com/oauth/access_token\", requestOptions)\n          .then(response => response.text())\n          .then(result => {\n              const {access_token} = JSON.parse(result);\n              // Получаем медиа, дока — https://developers.facebook.com/docs/instagram-basic-display-api/reference/media\n              fetch(`https://graph.instagram.com/me/media?fields=id,caption,media_url,media_typ,children{fields=id,media_url,thumbnail_url,permalink}&access_token=${access_token}`)\n                  .then((response) => {\n                      // Пример ответа\n                      // {\n                      //     \"data\": [\n                      //     {\n                      //         \"id\": \"17929796143072076\",\n                      //         \"caption\": \".\\nLoud\\nSonic\\nDrive\",\n                      //         \"media_url\": \"https://scontent.cdninstagram.com/v/t51.2885-15/30079848_187080805247715_1208171345427300352_n.jpg?_nc_cat=106&_nc_sid=8ae9d6&_nc_ohc=jwG95Nw2a2QAX-d2gSD&_nc_ht=scontent.cdninstagram.com&oh=00a089a51a1baffdc0ed2aec543c7a9d&oe=5F55C1FF\",\n                      //         \"media_type\": \"IMAGE\",\n                      //         \"permalink\": \"https://www.instagram.com/p/BhpRfGDgq7S/\"\n                      //     },\n                      //     {\n                      //         \"id\": \"17917360144049656\",\n                      //         \"media_url\": \"https://video.cdninstagram.com/v/t50.2886-16/19231613_364675197321723_92048278798991360_n.mp4?_nc_cat=101&_nc_sid=8ae9d6&_nc_ohc=k68MJyPx07gAX-lVUVv&_nc_ht=video.cdninstagram.com&oh=7fc6d530a0468ef83980fa754a0aa10f&oe=5F55C985\",\n                      //         \"media_type\": \"VIDEO\",\n                      //         \"permalink\": \"https://www.instagram.com/p/BZrUFGhHchW/\"\n                      //     },\n                      //     {\n                      //         \"id\": \"17842426411223684\",\n                      //         \"media_url\": \"https://scontent.cdninstagram.com/v/t51.2885-15/21985199_184523302093828_5203688462078705664_n.jpg?_nc_cat=108&_nc_sid=8ae9d6&_nc_ohc=-BNiuqzpqcAAX8yHrNE&_nc_ht=scontent.cdninstagram.com&oh=43bbc72f13035c0e000a8647056a0afd&oe=5F551CA5\",\n                      //         \"media_type\": \"CAROUSEL_ALBUM\",\n                      //         \"permalink\": \"https://www.instagram.com/p/BZok_GdnQtF/\",\n                      //         \"children\": {\n                      //             \"data\": [\n                      //                 {\n                      //                     \"media_url\": \"https://scontent.cdninstagram.com/v/t51.2885-15/21985199_184523302093828_5203688462078705664_n.jpg?_nc_cat=108&_nc_sid=8ae9d6&_nc_ohc=-BNiuqzpqcAAX8yHrNE&_nc_ht=scontent.cdninstagram.com&oh=43bbc72f13035c0e000a8647056a0afd&oe=5F551CA5\",\n                      //                     \"permalink\": \"https://www.instagram.com/p/BZok7_mH3dz/\",\n                      //                     \"id\": \"17874511048182734\"\n                      //                 },\n                      //                 {\n                      //                     \"media_url\": \"https://scontent.cdninstagram.com/v/t51.2885-15/21984989_1539562789442349_7823649526597550080_n.jpg?_nc_cat=105&_nc_sid=8ae9d6&_nc_ohc=FZv_0iFJihIAX-5w3my&_nc_ht=scontent.cdninstagram.com&oh=dfe1f66ed638798edb43e53b51bcd539&oe=5F54242D\",\n                      //                     \"permalink\": \"https://www.instagram.com/p/BZok8K7HgPq/\",\n                      //                     \"id\": \"17860123915195020\"\n                      //                 },\n                      //                 {\n                      //                     \"media_url\": \"https://scontent.cdninstagram.com/v/t51.2885-15/22158010_1685461441465594_2115269026753019904_n.jpg?_nc_cat=102&_nc_sid=8ae9d6&_nc_ohc=DB-Lp5En2XQAX9wpmAs&_nc_ht=scontent.cdninstagram.com&oh=21500ba1d077eea4edc641a67eade2d2&oe=5F55C390\",\n                      //                     \"permalink\": \"https://www.instagram.com/p/BZok8f8nvAu/\",\n                      //                     \"id\": \"17860669534197925\"\n                      //                 }\n                      //             ]\n                      //         }\n                      //     },\n                      // }\n                      console.log(response);\n                  });\n          })\n          .catch(error => console.log('error', error));\n  }\n};\n\nexport {reducer, Operation, ActionType, ActionCreator};\n","import React, { useState, useEffect }  from 'react';\nimport {connect} from 'react-redux';\nimport {getCode} from '../../reducer/data/selectors'\nimport {Operation as DataOperation} from '../../reducer/data/data';\n\nconst App = ({setCode, code}) => {\n    const redirect = () => {\n        fetch(`https://api.instagram.com/oauth/authorize?client_id=1576420319199590&redirect_uri=https://volokhovoleg.github.io/&scope=user_profile,user_media&response_type=code`)\n            .then((response) => {\n                window.open(response.url);\n            })\n            .catch((error) => {\n                throw error;\n            });\n    };\n\n    useEffect(() => {\n        const checkCode = () =>\n            new URLSearchParams(window.location.search).has(`code`)\n            && setCode(new URLSearchParams(window.location.search).get(`code`));\n        checkCode();\n    }, [])\n\n    return <>\n      <button onClick={()=> {\n          redirect();\n      }} type={\"button\"}>Получить данные инсты</button>\n    </>;\n};\n\nconst mapStateToProps = (state) => ({\n    code: getCode(state),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    setCode(code) {\n        dispatch(DataOperation.setCode(code));\n    }\n});\n\nexport {App};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import {combineReducers} from 'redux';\nimport {reducer as data} from './data/data';\nimport NameSpace from './name-space';\n\nexport default combineReducers({\n  [NameSpace.DATA]: data,\n});\n","import React from 'react';\nimport App from './components/App/App.jsx';\nimport ReactDOM from 'react-dom';\nimport {createStore, applyMiddleware} from 'redux';\nimport {Provider} from 'react-redux';\nimport reducer from './reducer/reducer';\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\n\nconst store = createStore(\n    reducer,\n    composeWithDevTools(\n        applyMiddleware(thunk.withExtraArgument())\n    )\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}